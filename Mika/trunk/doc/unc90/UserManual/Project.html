<title>/k/ Embedded Java Solutions - Mika v1.2 User Manual - Building a Project</title>
<!-- Revision History                                             -->
<!-- 20031015 First Draft              Chris Gray                          -->
<!-- 20031108 First Revision           Chris Gray                          -->
<!-- 20031218 Renamed to Mika          Chris Gray                          -->
<!-- 20040302 Updated for LxNETES 2.3  Chris Gray                          -->
<!-- 20040416 Updated for Mika 1.1     Chris Gray                          -->
<!-- 20040428 Updated after review     Chris Gray                          -->

<body bgcolor=white>

<h2>Building a Project</h2>

<p>There are two basic approches to building a Java project using 
<font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>:
<ul>
<li>The command-line approach, using <tt>make</tt> and a Java compiler such
as <tt>jikes</tt>, <tt>kjc</tt>, or <tt>javac</tt>; or
<li>A Java development environment such as Ant, JBuilder, Eclipse, etc..
</ul>

<h3>Command-line Approach</h3>

<p>Some sample projects are provided as subdirectories of the <tt>java-apps</tt> directory.
These projects contain Makefiles which can be used to generate <tt>.class</tt>
and <tt>.jar</tt> files.

<p>The directory <tt>java-apps/calc</tt> has the following structure:
<pre>
  java-apps/calc/
    Makefile
    META-INF/
      MANIFEST.MF
    javasrc/
      Makefile
      Calculator.java
      CalculatorApplication.java
</pre>

<h4>Generating the <tt>.class</tt> and <tt>.jar</tt> files</h4>

<p>The subdirectory <tt>META-INF</tt> contains a file <tt>MANIFEST.MF</tt>
file which serves mainly to indicate the class which contains the <tt>main()</tt> method:
<pre>
Manifest-Version: 1.0
Created-By: Hand
Main-Class: CalculatorApplication
</pre>

<p>The subdirectory <tt>javasrc</tt> contains a source tree whose structure 
reflects the package structure of the application; in this case both files
form part of the "default" package, so they are located in the 
<tt>javasrc</tt> directory itself.

<p>If you <tt>cd</tt> to <tt>java-apps/calc</tt> and type <tt>make install</tt>
 (or just <tt>make</tt>), two actions are performed:
<ul>
<li>under subdirectory <tt>class/</tt>, a tree of <tt>.class</tt> files is created
which mirrors the source tree in <tt>javasrc/</tt>.
<pre>
    class/
      Calculator.class
      CalculatorApplication.class
</pre>

<li>A JAR file <tt>calculator.jar</tt> is created in the <tt>java-apps/calc/</tt>
directory. This JAR file contains all the <tt>.class</tt> files we just
generated, together with <tt>META-INF/MANIFEST.MF</tt>.
</ul>

<p>You may wish to add a third action, which copies the <tt>.class</tt> files or
the <tt>.jar</tt> file to an appropriate location: e.g;
<pre>
        cp calculator.jar /exports/nfsroot-cc9p9360dev/somewhere
</pre>

<p><font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>'s 
default classpath is <tt>/usr/lib/mika/apps/</tt>, so class files
placed under this directory may be executed by simply typing
<tt>mika</tt>&nbsp;<i>classname</i> .
<tt>.jar</tt> files may be placed anywhere in the file hierarchy, and can be
executed using the <tt>mika -jar</tt> command. <tt>.jar</tt> files intended to
serve as extension libraries should be placed in <tt>/usr/lib/mika/ext/</tt> -
see the next chapter, <i>Executing Java Code on the UNC90</i> for more details.

<h3>Using a Java Development Environment</h3>

<p>Any development environment can be used to develop Java code for use on
<font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>, 
so long as the restrictions of the 
<font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font> 
class libraries are respected.
This can be approximated by selecting a Java "profile" such as CDC/FP or CDC/PP,
but preferably the development library should be configured to use 
<font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>'s
<tt>system/wre.jar</tt> as its system classpath when compiling
applications. This ensures that a compilation error will be flagged if your
application attempts to use any class or member which is not present in the
<font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font> libraries.

<p align=center><small>[
<a href="index.html">Index</a>
] - [
Previous : <a href="Installation.html">Installation</a>
] - [
Next : <a href="Running.html">Executing Java Code on the UNC90</a>
]</small></p>
