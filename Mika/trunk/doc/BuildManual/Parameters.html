<title>/k/ Embedded Java Solutions - Mika Build Manual - Build Parameters</title>
<!-- Revision History                                                      -->
<!-- 20040524 First Draft              Chris Gray                          -->

<body bgcolor=white>

<h2>Build Parameters</h2>

<p>A number of variables are used to guide the
<font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
build process. 

<h3>Modifying the build parameters</h3>

<p>There are two ways to build Mika with parameters other than the default:
<ul>
<li><p>by specifying -sPARAMETER=value on the command line, e.g.
<pre>
acunia-jam -sJAVAX_CRYPTO=false install
</pre>
<li><p>by putting the changes into a file in the <tt>Configuration/wonka</tt>
directory (e.g. <tt>Configuration/wonka/myconf</tt>), and invoking it on
the command line:
<pre>
acunia-jam -sWONKA_CONFIG=myconf install
</pre>

<p>The file <tt>Configuration/wonka/sample</tt> contains an example
configuration file. Note that <tt>jam</tt> uses a rather special syntax:
<ul><li><p>"words" are separated by spaces, as in e.g. Forth;
    <li><p>statements are terminated by a semicolon, as in Algol/Pascal/C.
</ul>
<p>Most problems with configuration files are caused by omitting the space
before a semicolon or around "=".

<p><b>When using changed parameters it is recommended to perform 
at least <tt>acunia-jam clean</tt> before re-building <font color=#cc0000>Mi|k|a</font>.</b>

<h3>List of Parameters</h3>

<p>The names of the build parameters, their use, and their default values in file
<tt>Configuration/wonka/default</tt>, are summarised in the tables below.

<h4>Selecting <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font> Features and Packages</h4>

<table align=center width="90%" border=1>
<tr><th>Parameter</th><th>Explanation</th><th>Default</th></tr>
<tr valign=baseline>
  <td>
    <tt>GC_SAFE_POINTS</tt>
  </td>
  <td>
    If set to 'true', stop-the-world garbage collection is performed instead
    of the default mostly-concurrent collector. Enabling this option results
    in greater theoretical stability, at the cost of decreased responsiveness.
  </td>
  <td>
    <tt>false</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>JAVA_BEANS</tt>
  </td>
  <td>
    If set to 'true', code for the <tt>java.beans</tt> package will be
    generated and incorporated into the system class file.
  </td>
  <td>
    <tt>true</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>JAVAX_COMM</tt>
  </td>
  <td>
    If set to 'true', code for the <tt>javax.comm</tt> package will be
    generated and placed in <tt>$(INSTALLEXTCLASSDIR)</tt>.
    This option also results in extra native code being compiled into
    the </tt>mika</tt> binary.
  </td>
  <td>
    <tt>true</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>JAVAX_CRYPTO</tt>
  </td>
  <td>
    If set to 'true', code for the <tt>javax.crypto</tt> package will be
    generated and placed in <tt>$(INSTALLEXTCLASSDIR)</tt>.
  </td>
  <td>
    <tt>true</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>JAVAX_MICROEDITION_IO</tt>
  </td>
  <td>
    If set to 'true', code for the <tt>javax.microedition.io</tt> package 
    will be generated and placed in <tt>$(INSTALLEXTCLASSDIR)</tt>.
  </td>
  <td>
    <tt>true</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>METHOD_DEBUG</tt>
  </td>
  <td>
    If set to 'true', line-number and variable-name information found in
    class files will be incorporated into 
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>'s
    internal tables and used e.g. when generating a stack trace.
    Note that use of this feature may increase memory requirements
    substantially.
  </td>
  <td>
    <tt>false</tt>
  </td>
<tr valign=baseline>
  <td>
    <tt>NETWORK</tt>
  </td>
  <td>
    Selects the networking (TCP/IP) stack to be used; either 'native' 
    (use the BSD socket libraries provided by the target environment)
    or 'none'.
    There is probably not much sense in building for "none" on UNC20.
  </td>
  <td>
    <tt>native</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>PLATFORM</tt>
  </td>
  <td>
    Selects platform-specific code to be included (in this case the
    <tt>de.fsforth.unc20</tt> package, which gives access to the LCD
    screen and digital i/o of the UNC20).
  </td>
  <td>
    <tt>unc20</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>SECURITY</tt>
  </td>
  <td>
    Selects the security level:
    <dl><dt>none</dt>
        <dd>No security checks are generated, and no security manager is defined.
        </dd>
        <dt>coarse</dt>
        <dd>Security checks &agrave; la JDK 1.1 are generated, and a default
            SecurityManager is installed.
        </dd>            
        <dt>fine</dt>
        <dd>Fine-grained security control is implemented as per the Java2 spec.
        </dd>
    </dl>
    <p><b>Notes:</b>
       <ul><li>Since <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
               currently contains no code verifier, no level of <tt>SECURITY</tt>
               will prevent abuse of the system by malicious code.
               However, the checks generated by <tt>SECURITY = coarse</tt> or
               <tt>SECURITY = fine</tt> may still prove useful in controlling
               access to certain resources by "trusted" third-party code.
           </li>
           <li>In this release, lower security settings still result in most
               of the 'fine' security code being included in <tt>wre.jar</tt>.
               However the unneeded classes will never be loaded, so although
               some ROM/flash space is wasted no extra RAM is used.
               Future releases of
               <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
               will feature more exact tuning in this respect.
           </li>
       </ul>
    </p>
  </td>
  <td>
    <tt>none</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>SHARED_HEAP</tt>
  </td>
  <td>
    If set to 'true', OSwald (
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>'s internal RTOS)
    will export symbols malloc(), calloc(), and free() which map to its own
    internal memory allocation routines; so native code which is linked to 
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
    will be allocated code from 
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>'s heap.
  </td>
  <td>
    <tt>false</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>SHARED_OBJECTS<tt>
  </td>
  <td>
    If set to 'true', code will be generated to dynamically load native code
    from shared object (<tt>.so</tt>) files.
  </td>
  <td>
    <tt>true</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>UNICODE_SUBSETS</tt>
  </td>
  <td>
    By default code will be generated in <tt>unicode.c</tt> to cover only 
    ISO 8859-1. (Subset numbers 1, 2, 32, 33, and 34).
    Specify a colon-separated list of subset numbers to extend Unicode coverage
    to one or more subsets of Unicode: see the list below.
    Specify 999 to get complete Unicode coverage.
    Characters from non-included subsets will be treated by 
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
    as undefined code points.

<table border=0>
<tr><th align=left>Subset number</th><th align=left>Descriptive name</th><th align=left>Unicode subrange</th></tr>
<tr><td>  3</td><td>LATIN EXTENDED-A                   </td><td>0100-017F</td></tr>
<tr><td>  4</td><td>LATIN EXTENDED-B                   </td><td>0180-024F</td></tr>
<tr><td>  5</td><td>IPA EXTENSIONS                     </td><td>0250-02AF</td></tr>
<tr><td>  6</td><td>SPACING MODIFIER LETTERS           </td><td>02B0-02FF</td></tr>
<tr><td>  7</td><td>COMBINING DIACRITICAL MARKS        </td><td>0300-036F</td></tr>
<tr><td>  8</td><td>BASIC GREEK                        </td><td>0370-03CF</td></tr>
<tr><td>  9</td><td>GREEK SYMBOLS AND COPTIC           </td><td>03D0-03FF</td></tr>
<tr><td> 10</td><td>CYRILLIC                           </td><td>0400-04FF</td></tr>
<tr><td> 11</td><td>ARMENIAN                           </td><td>0530-058F</td></tr>
<tr><td> 12</td><td>BASIC HEBREW                       </td><td>05D0-05EA</td></tr>
<tr><td> 13</td><td>HEBREW EXTENDED                    </td><td>0590-05CF,05EB-05FF</td></tr>
<tr><td> 14</td><td>BASIC ARABIC                       </td><td>0600-065F</td></tr>
<tr><td> 15</td><td>ARABIC EXTENDED                    </td><td>0660-06FF</td></tr>
<tr><td> 16</td><td>DEVANGARI                          </td><td>0900-097F,200C,200D</td></tr>
<tr><td> 17</td><td>BENGALI                            </td><td>0980-09FF,200C,200D</td></tr>
<tr><td> 18</td><td>GURMUKHI                           </td><td>0A00-0A7F,200C,200D</td></tr>
<tr><td> 19</td><td>GUJARATI                           </td><td>0A80-0AFF,200C,200D</td></tr>
<tr><td> 20</td><td>ORIYA                              </td><td>0B00-0B7F,200C,200D</td></tr>
<tr><td> 21</td><td>TAMIL                              </td><td>0B80-0BFF,200C,200D</td></tr>
<tr><td> 22</td><td>TELUGU                             </td><td>0C00-0C7F,200C,200D</td></tr>
<tr><td> 23</td><td>KANNADA                            </td><td>0C80-0CFF,200C,200D</td></tr>
<tr><td> 24</td><td>MALAYALAM                          </td><td>0D00-0D7F,200C,200D</td></tr>
<tr><td> 25</td><td>THAI                               </td><td>0E00-0E7F</td></tr>
<tr><td> 26</td><td>LAO                                </td><td>0E80-0EFF</td></tr>
<tr><td> 27</td><td>BASIC GEORGIAN                     </td><td>10D0-10FF</td></tr>
<tr><td> 28</td><td>GEORGIAN EXTENDED                  </td><td>10A0-10CF</td></tr>
<tr><td> 29</td><td>HANGUL JAMO                        </td><td>1100-11FF</td></tr>
<tr><td> 30</td><td>LATIN EXTENDED ADDITIONAL          </td><td>1E00-1EFF</td></tr>
<tr><td> 31</td><td>GREEK EXTENDED                     </td><td>1F00-1FFF</td></tr>
<tr><td> 35</td><td>COMBINING DIACRITICAL MARKS FOR SYMBOLS</td><td>20D0-20FF</td></tr>
<tr><td> 36</td><td>LETTERLIKE SYMBOLS                 </td><td>2100-214F</td></tr>
<tr><td> 37</td><td>NUMBER FORMS                       </td><td>2150-218F</td></tr>
<tr><td> 38</td><td>ARROWS                             </td><td>2190-21FF</td></tr>
<tr><td> 39</td><td>MATHEMATICAL OPERATORS             </td><td>2200-2FF</td></tr>
<tr><td> 40</td><td>MISCELLANEOUS TECHNICAL            </td><td>2300-23FF</td></tr>
<tr><td> 41</td><td>CONTROL PICTURES                   </td><td>2400-243F</td></tr>
<tr><td> 42</td><td>OPTICAL CHARACTER RECOGNITION      </td><td>2440-245F</td></tr>
<tr><td> 43</td><td>ENCLOSED ALPHANUMERICS             </td><td>2460-24FF</td></tr>
<tr><td> 44</td><td>BOX DRAWING                        </td><td>2500-257F</td></tr>
<tr><td> 45</td><td>BLOCK ELEMENTS                     </td><td>2580-259F</td></tr>
<tr><td> 46</td><td>GEOMETRIC SHAPES                   </td><td>25A0-25FF</td></tr>
<tr><td> 47</td><td>MISCELLANEOUS SYMBOLS              </td><td>2600-26FF</td></tr>
<tr><td> 48</td><td>DINGBATS                           </td><td>2700-27BF</td></tr>
<tr><td> 49</td><td>CJK SYMBOLS AND PUNCTUATION        </td><td>3000-303F</td></tr>
<tr><td> 50</td><td>HIRAGANA                           </td><td>3040-309F</td></tr>
<tr><td> 51</td><td>KATAKANA                           </td><td>30A0-30FF</td></tr>
<tr><td> 52</td><td>BOPOMOFO                           </td><td>3100-312F,31A0-31BF</td></tr>
<tr><td> 53</td><td>HANGUL COMPATIBILTY JAMO           </td><td>3130-318F</td></tr>
<tr><td> 54</td><td>CJK MISCELLANEOUS                  </td><td>3190-319F</td></tr>
<tr><td> 55</td><td>ENCLOSED CJK LETTERS AND MONTHS    </td><td>3200-32FF</td></tr>
<tr><td> 56</td><td>CJK COMPATIBILTY                   </td><td>3300-33FF</td></tr>
<tr><td> 60</td><td>CJK UNIFIED IDEOGRAPHS             </td><td>4E00-9FFF</td></tr>
<tr><td> 61</td><td>PRIVATE USE AREA                   </td><td>E000-F8FF</td></tr>
<tr><td> 62</td><td>CJK COMPATIBILTY IDEOGRAPHS        </td><td>F900-FAFF</td></tr>
<tr><td> 63</td><td>ALPHABETIC PRESENTATION FORMS      </td><td>FB00-FB4F</td></tr>
<tr><td> 64</td><td>ARABIC PRESENTATION FORMS-A        </td><td>FB50-FDFF</td></tr>
<tr><td> 65</td><td>COMBINING HALF-MARKS               </td><td>FE20-FE2F</td></tr>
<tr><td> 66</td><td>CJK COMPATIBILTY FORMS             </td><td>FE30-FE4F</td></tr>
<tr><td> 67</td><td>SMALL FORM VARIANTS                </td><td>FE50-FE6F</td></tr>
<tr><td> 68</td><td>ARABIC PRESENTATION FORMS-B        </td><td>FE70-FEFE</td></tr>
<tr><td> 69</td><td>HALFWIDTH AND FULLWIDTH FORMS      </td><td>FF00-FFEF</td></tr>
<tr><td> 70</td><td>SPECIALS                           </td><td>FFF0-FFFD</td></tr>
<tr><td> 71</td><td>HANGUL SYLLABLES                   </td><td>AC00-D7A3</td></tr>
<tr><td> 72</td><td>BASIC TIBETAN                      </td><td>0F00-0FBF</td></tr>
<tr><td> 73</td><td>ETHIOPIC                           </td><td>1200-137F</td></tr>
<tr><td> 74</td><td>UNIFIED CANADIAN ABORIGINAL SYLLABICS</td><td>1400-167F</td></tr>
<tr><td> 75</td><td>CHEROKEE                           </td><td>13A0-13FF</td></tr>
<tr><td> 76</td><td>YI SYLLABLES                       </td><td>A000-A48F</td></tr>
<tr><td> 77</td><td>YI RADICALS                        </td><td>A490-A4CF</td></tr>
<tr><td> 78</td><td>KANGXI RADICALS                    </td><td>2F00-2FDF</td></tr>
<tr><td> 79</td><td>CJK RADICALS SUPPLEMENT            </td><td>2E80-2EFF</td></tr>
<tr><td> 80</td><td>BRAILLE PATTERNS                   </td><td>2800-28FF</td></tr>
<tr><td> 81</td><td>CJK UNIFIED IDEOGRAPHS EXTENSION A </td><td>3400-4DBF</td></tr>
<tr><td> 82</td><td>OGHAM                              </td><td>1680-169F</td></tr>
<tr><td> 83</td><td>RUNIC                              </td><td>16A0-16FF</td></tr>
<tr><td> 84</td><td>SINHALA                            </td><td>0D80-0DFF</td></tr>
<tr><td> 85</td><td>SYRIAC                             </td><td>0700-074F</td></tr>
<tr><td> 86</td><td>THAANA                             </td><td>0780-07BF</td></tr>
<tr><td> 87</td><td>BASIC MYANMAR                      </td><td>1000-104F,200C,200D</td></tr>
<tr><td> 88</td><td>KHMER                              </td><td>1780-17FF,200C,200D</td></tr>
<tr><td> 89</td><td>MONGOLIAN                          </td><td>1800-18AF</td></tr>
<tr><td> 90</td><td>EXTENDED MYANMAR                   </td><td>1050-109F</td></tr>
<tr><td> 91</td><td>TIBETAN                            </td><td>0F00-0FFF</td></tr>
<tr><td>200</td><td>ZERO-WIDTH BOUNDARY INDICATORS     </td><td>200B-200D,FEFF</td></tr>
<tr><td>201</td><td>FORMAT SEPARATORS                  </td><td>2028-2029</td></tr>
<tr><td>202</td><td>BI-DIRECVTIONAL FORMAT MARKS       </td><td>200E-200F</td></tr>
<tr><td>203</td><td>BI-DIRECTIONAL FORMAT EMBEDDINGS   </td><td>202A-202E</td></tr>
<tr><td>204</td><td>HANGUL FILL CHARACTERS             </td><td>3164,FFA0</td></tr>
<tr><td>205</td><td>CHARACTER SHAPING SELECTORS        </td><td>206A-206D</td></tr>
<tr><td>206</td><td>NUMERIC SHAPE SELECTORS            </td><td>206E-206F</td></tr>
<tr><td>207</td><td>IDEOGRAPHIC DESCRIPTION CHARACTERS </td><td>2FF0-2FFF</td></tr>
</table>
  </td>
  <td>
    <tt>0</tt>
  </td>
</tr>
</table>

<h4>Parameters related to the directory structure</h4>

<table align=center width="90%" border=1>
<tr><th>Parameter</th><th>Explanation</th><th>Default</th></tr>
<tr valign=baseline>
  <td>
    <tt>BINDIR</tt>
  </td>
  <td>
    Same meaning as <tt>INSTALLDIR</tt>, see below. 
    In future releases these two parameters will be merged.
    Until then, they should both be set the same.
  </td>
  <td>
    <tt>build-arm-uclinux/mika</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>BOOTCLASSDIR</tt>
  </td>
  <td>
    Specifies the target directory (relative to <tt>$(FSROOT)</tt> where
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
    will look for bootstrap classes and resources if 
    <tt>-Xbootclasspath</tt> is not specified.
    Note that a prefix of '<tt>{}/</tt>' (i.e. fsroot-relative)
    is implied. Thus the default bootstrap path is <pre>
{}/$(BOOTCLASSDIR):{}/$(BOOTCLASSDIR)/$(BOOTCLASSFILE)
    </pre>
  </td>
  <td>
    <tt>system</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>BOOTCLASSFILE</tt>
  </td>
  <td>
    Name of the file within <tt>$(BOOTCLASSDIR)</tt> which will contain the
    system class libraries.
  </td>
  <td>
    <tt>wre.jar</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>BUILDROOT</tt>
  </td>
  <td>
    <tt>BUILDROOT</tt> (on the host machine) specifies the directory under
    which all the resources needed by 
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
    at runtime should be placed.  If the 
    target system is not the system on which
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
    is built then you will have
    to copy <tt>BUILDROOT</tt> and all its subdirectories to the target system,
    in addition to copying the 
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
    binary.  If 
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
    is being built on the same
    system as it will run on (or if the directory structures are sufficiently
    similar) then just set <tt>BUILDROOT</tt> to be the same as <tt>FSROOT</tt>.
  </td>
  <td>
    <tt>build-arm-uclinux/mika/fsroot</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>COMPRESS_WRE_JAR</tt>
  </td>
  <td>
    If set to 'true', the jar file containing the system classes will be
    compressed using <tt>zip -9</tt>. Otherwise the jar file will be
    uncompressed.
  </td>
  <td>
    <tt>true</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>CONFIGDIR</tt>
  </td>
  <td>
    Specifies the target directory (relative to <tt>$(FSROOT)</tt> where
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
    will look for runtime configuration files such as  
    <tt>system.properties</tt>.
    Note that a prefix of '<tt>{}/</tt>' (i.e. fsroot-relative)
    is implied, so the default is really <tt>{}/system</tt>.
  </td>
  <td>
    <tt>system</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>EXTCLASSDIR</tt>
  </td>
  <td>
    Specifies the target directory (relative to <tt>$(FSROOT)</tt> where
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
    will look for jar files holding "extension" packages if 
    system property <tt>java.ext.dirs</tt> is not set.
    Note that a prefix of '<tt>{}/</tt>' (i.e. fsroot-relative)
    is implied, so the default is really <tt>{}/system/ext</tt>.
  </td>
  <td>
     <tt>system/ext</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>FSROOT</tt>
  </td>
  <td>
    When 
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
    is run it will translate the prefix '{}/' attached to any path into 
    <tt>$(FSROOT)</tt>; 
    e.g. the path <tt>{}/system/wre.jar</tt>
    will be translated to <tt>$(FSROOT)/system/wre.jar</tt>.
    <tt>FSROOT</tt> may be an absolute or a relative path; 
    if relative it is interpreted relative to the location of the 
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
    binary (args[0]), not the current 
    directory of the shell from which Mika was launched.
  </td>
  <td>
    <tt>./fsroot</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>INSTALLBOOTCLASSDIR</tt>
  </td>
  <td>
     Host directory into which the jar file containing the system classes
     will be installed.
  </td>
  <td>
    <tt>$(BUILDROOT)/$(BOOTCLASSDIR)</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>INSTALLCONFIGDIR</tt>
  </td>
  <td>
     Host directory into which runtime configuration files such as
     <tt>system.properties</tt> will be installed.
  </td>
  <td>
    <tt>$(BUILDROOT)/$(CONFIGDIR)</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>INSTALLDIR</tt>
  </td>
  <td>
    Specifies where the <tt>mika</tt> binary will be placed.  
    The default is to place it in a "sandbox" directory, so that it can be run
    by cd'ing to that directory and typing <tt>./mika-$(CPU)</tt>.  
    However this could also be a directory on your <tt>$PATH</tt>, 
    such as <tt>usr/local/bin</tt>.
  </td>
  <td>
    <tt>build-arm-uclinux/mika</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>INSTALLEXTCLASSDIR</tt>
  </td>
  <td>
     Host directory into which the jar files containing extension packages
     such as <tt>javax.crypto</tt> will be installed.
  </td>
  <td>
    <tt>$(BUILDROOT)/$(EXTCLASSDIR)</tt>
  </td>
</tr>
</table>

<h4>Other runtime configuration parameters</h4>

<table align=center width="90%" border=1>
<tr><th>Parameter</th><th>Explanation</th><th>Default</th></tr>
<tr valign=baseline>
  <td>
    <tt>CPU_MIPS</tt>
  </td>
  <td>
    Used to derive a sensible value for the timebase "tick" used by
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>'s
    internal scheduler. Should be a "round" number.
  </td>
  <td>
    <tt>40</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>DETECT_FLYING_PIGS</tt>
  </td>
  <td>
    If set to 'true', a check will be performed for objects which
    appear to be unreachable in one GC pass and reachable in the next. This of
    course "cannot happen", hence the name ...</br>
    Normally the VM recovers well from these "glitches", so this check should
    be disabled for production code.
  </td>
  <td>
    <tt>false</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>DEFAULT_HEAP_SIZE</tt>
  </td>
  <td>
    Sets the heap size which should be used if no <tt>-Xmx=&lt;bytes&gt;</tt>
    flag is specified on the command line at runtime. 
    The usual suffices 'k', 'm' can be used.
  </td>
  <td>
    <tt>8M</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>JAVA_DEBUG</tt>
  </td>
  <td>
    If set to 'true', the system class libraries will be generated with 
    debugging information included (-g flag of the Java compiler).
  </td>
  <td>
    <tt>false</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>JDWP</tt>
  </td>
  <td>
    If set to 'true', code will be generated for the Java Debugging Wire
    Protocol (JDWP). Not currently useful, as
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
    currently has no implementation of JDPA.
  </td>
  <td>
    <tt>false</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>PROFILING</tt>
  </td>
  <td>
    Enables the -pg flag to <tt>gcc</tt> (see <tt>info gcc</tt> for more details).
  </td>
  <td>
    <tt>false</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>VERSION_STRING</tt>
  </td>
  <td>
    Version string which is printed out by the -version command line option.
  </td>
  <td>
    <tt>"Mika 1.1.1 Source Edition 20040524"</tt>
  </td>
</tr>
</table>

<h4>Parameters which should not be changed</h4>

<p>The following parameters should be left as they are in
<tt>Configuration/wonka/defaults</tt>, otherwise a successful build will
not result.

<table align=center width="90%" border=1>
<tr><th>Parameter</th><th>Explanation</th><th>Default</th></tr>
<tr valign=baseline>
  <td>
    <tt>AWT</tt>
  </td>
  <td>
    For headless systems this must be 'none'.
    No AWT sources are included in this distribution.
  </td>
  <td>
    <tt>none</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>COMPILER</tt>
  </td>
  <td>
    Selects the runtime compiler.
    No runtime compiler is included in this distribution.
  </td>
  <td>
    <tt>none</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>DEBUG</tt>
  </td>
  <td>
    If set to 'true', a version of
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
    is produced with verbose debugging information incorporated.
    Unfortunately this version is too large for the LxNETES loader,
    so this feature cannot be used on UNC20.
  </td>
  <td>
    <tt>false</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>FILESYSTEM</tt>
  </td>
  <td>
    This can take the values `native' (meaning use the filesystem of
    the target environment) or `vfs' (meaning use
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>'s
    own built-in implementation
    of e2fs). Only 'native' is available on UNC20.
  </td>
  <td>
    <tt>native</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>GC</tt>
  </td>
  <td>
    If 'true', code for automated garbage collection will be generated.
    <p>Needless to say, this is essential for continuous operation, so the
       only reason to set <tt>GC = false</tt> is to investigate some kind of mysterious
       malfunction. 
  </td>
  <td>
    <tt>true</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>JNI</tt>
  </td>
  <td>
    If set to 'true', code for the Java Native Interface (JNI) is included.
    In fact this release of 
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>
    cannot function without JNI, so this parameter should always be 'true'.
  </td>
  <td>
    <tt>true</tt>
  </td>
</tr>
</tr>
<tr valign=baseline>
  <td>
    <tt>MODULES</tt>
  </td>
  <td>
    If set to 'true', code will be generated to dynamically load native code
    from '<tt>.o</tt>' files. This feature is not available in this release of
    <font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>.
  </td>
  <td>
    <tt>false</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>SCHEDULER</tt>
  </td>
  <td>
    Must be 'oswald' for uClinux (LxNETES).
  </td>
  <td>
    <tt>oswald</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>STATIC</tt>
  </td>
  <td>
    If set to 'true', a statically-linked binary will be created.
    Must be 'true' for uClinux/LxNETES.
  </td>
  <td>
    <tt>true</tt>
  </td>
</tr>
<tr valign=baseline>
  <td>
    <tt>TESTS</tt>
  </td>
  <td>
    If set to 'true', code will be generated for the Mauve suite and JNI tests.
    Not applicable, as code for these tests is not included in this
    distribution.
  </td>
  <td>
    <tt>false</tt>
  </td>
</tr>
</table>

<h3>Selection of the cross-compilation chain</h3>

<p>The tools used for cross-compilation, linking, etc. are defined in
<tt>Configuration/cpu/arm</tt>. The default values should be correct
for a standard installation of the UNC20 Development Kit.

<pre>
$cat Configuration/cpu/arm
###########################################################################
# Copyright  (c) 2001 by Acunia N.V. All rights reserved.                 #
#                                                                         #
# This software is copyrighted by and is the sole property of Acunia N.V. #
# and its licensors, if any. All rights, title, ownership, or other       #
# interests in the software remain the property of Acunia N.V. and its    #
# licensors, if any.                                                      #
#                                                                         #
# This software may only be used in accordance with the corresponding     #
# license agreement. Any unauthorized use, duplication, transmission,     #
#  distribution or disclosure of this software is expressly forbidden.    #
#                                                                         #
# This Copyright notice may not be removed or modified without prior      #
# written consent of Acunia N.V.                                          #
#                                                                         #
# Acunia N.V. reserves the right to modify this software without notice.  #
#                                                                         #
#   Acunia N.V.                                                           #
#   Vanden Tymplestraat 35      info@acunia.com                           #
#   3000 Leuven                 http://www.acunia.com                     #
#   Belgium - EUROPE                                                      #
###########################################################################

ECHO Configuring build for an arm cpu. ;

CC = arm-elf-gcc ;
AR = arm-elf-ar ru ;
AS = arm-elf-as ;
RANLIB = arm-elf-ranlib ;
LINK = arm-elf-gcc ;

LD_TOOL = arm-elf-ld ;
AR_TOOL = arm-elf-ar ;
</pre>

<h3>Effect of Parameters on System Properties</h3>

<p>The following system properties are derived from the configuration
parameters described above.

<table>
<tr><td><b>Property name</b><td><b>Derived from</b>
<tr><td valign=top><tt>java.vm.version</tt>
    <td valign=top><tt>VERSION_STRING</tt>
<tr><td valign=top><tt>java.installation.dir
    <td valign=top><tt>INSTALLDIR</tt>
<tr><td valign=top><tt>java.ext.dirs
    <td valign=top><tt>EXTCLASSDIR</tt>
</table>

<p>The following wonka property is derived from a configuration parameter.
It can be overridden in the <tt>wonka.properties</tt> file.

<table>
<tr><td><b>Property name</b><td><b>Derived from</b>
<tr><td valign=top><tt>wonka.device.config</tt>
    <td valign=top><tt>{}/$(CONFIGDIR)/device.config</tt>
</table>

<p align=center><small>[
<a href="index.html">Index</a>
] - [
Previous : <a href="Build.html">Building Mika</a>
]</small></p>

