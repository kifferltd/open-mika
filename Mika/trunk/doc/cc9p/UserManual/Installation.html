<title>/k/ Embedded Java Solutions - Mika v1.2 User Manual - Installation</title>
<!-- Revision History                                                      -->
<!-- 20031015 First Draft              Chris Gray                          -->
<!-- 20031108 First Revision           Chris Gray                          -->
<!-- 20031218 Renamed to Mika          Chris Gray                          -->
<!-- 20040302 Updated for LxNETES 2.3  Chris Gray                          -->
<!-- 20040416 Updated for Mika 1.1     Chris Gray                          -->
<!-- 20040428 Updated after review     Chris Gray                          -->
<!-- 20051214 Updated for Mika 1.2, AWT Chris Gray                         -->
<!-- 20060103 Revised after feedback   Chris Gray                          -->

<body bgcolor=white>

<h2>Installation</h2>

<h3>Copyright notice<h3>

<p>The CD contains files <tt>COPYRIGHT</tt> and 
<tt>COPYRIGHT.Wonka</tt> which you should read carefully.

<h3>Installing the Jikes Compiler (optional)</h3>

<p>If you do not currently have any kind of Java development installed, you
will need to install at least a Java compiler. We recommend Jikes, an open 
source Java compiler developed by IBM.  You can find Jikes 
on the SourceForge web site at
<a href=http://sourceforge.net/projects/jikes/>http://sourceforge.net/projects/jikes/</a>; 
Debian users can also install the 'jikes' package 
(<tt>apt-get install jikes</tt>).
<p>Jikes is just a Java compiler, not a complete developement environment.
However it can be used in conjunction with the <tt>Makefile</tt>s supplied as 
part of the Mika distribution to provide a command-line based environment
which is perfectly adequate for small projects.
<p>See the chapter <a href=Project.html>Building a Project</a>
for more information on building projects using Jikes and <tt>make</tt>.

<h3>Preparing your CC9P kernel</h3>

<p>If you are not using AWT, or you already configured the LCD display
and touchscreen of your CC9P system, then no special preparation is required
in order to run Mika.
Otherwise you need first to build a kernel in which the necessary drivers
are enabled. 

<h4>Building an AWT-ready kernel</tt>

<p>The general steps required to build and install a new Linux kernel 
are described in chapter 4, <i>Building the First Project</i>
of the LxNETES Users' Guide (version 3.2).
For the building of an AWT-ready kernel we recommend that you create a new
project directory, i.e. a subdirectory of the <tt>LxNETES-3.2</tt> directory.
<pre>
mkdir LxNETES-3.2/mika_awt
</pre>

<p>In order to avoid having an annoying flashing cursor on the screen
while Mika is running, currently it is necessary to make a small change 
to the kernel console driver. This will be fixed in future versions of LxNETES.

<p>In the top-level <tt>LxNETES-3.2</tt> directory, 
open file <tt>linux/drivers/video/console/fbcon.c</tt> in a text editor, and
remove or "comment out" the following statement on lines 287-288:
<pre>
        ops->cursor(vc, info, p, mode, softback_lines, get_color(vc, info, c, 1),
                    get_color(vc, info, c, 0));
</pre>

<p>Now <tt>cd</tt> to thaproject directory and run <tt>../configure</tt>.

<p>To make the touchscreen of the CC9P development kit visible to Mika,
you need to enable the touchscreen driver in <tt>xconfig</tt>,
as shown in the two illustrations below.
Ensure that the framebuffer and touchscreen definitions both show the same
screen dimensions, i.e. 320 horizontal by 240 vertical. At the time of writing,
the default configuration has the dimensions of the touchscreen transposed!
<table align=center>
<tr><td><img src=xconfig1.png>
</table>
<table align=center>
<tr><td><img src=xconfig2.png>
</table>

<p>Note that you need to click twice on the relevant line to get a checkmark
in the box, meaning that the driver will be built into the kernel: 
clicking once results in a dot, which generates a kernel module.
<p>From the "File" menu, select "Save" and then
"Quit".

<h3>Installing the Mika environment</h3>

<p>The remaining instructions also apply to the non-AWT version of Mika.

<p>In your project directory, run the <tt>install.sh</tt> script on the CD; e.g.
<pre>
cd &#126;/LxNETES-3.2/myproject/
/cdrom/install.sh
</tt>
</pre>

<p>This will install the Mika binary in subdirectory
<tt>rootfs_wo_kernel/usr/bin/</tt>,
the Mika libraries in subdirectory <tt>rootfs_wo_kernel/usr/lib/mika/</tt>,
and the sample makefiles in subdirectory <tt>java-apps</tt>
of the project directory.

<h3>Completing installation</h3>

<p>After performing these steps you can proceed to the <tt>make</tt> and
<tt>make&nbsp;install</tt> steps of the kernel installation. To test the correct
functioning of 
<font color="#cc0000"><b>Mi</b>|<b>k</b>|<b>a</b></font>, 
try running the following commands:
<dl><dt><tt>mika HelloWorld</tt>
    <dd>Prints "Hello World" to the console.
    <dt><tt>mika HelloWorldAWT</tt>
    <dd>(AWT only) Shows animated "Hello World" message on the graphics screen.
    <dt><tt>mika CalculatorApplication</tt>
    <dd>(AWT only) Displays a simple pocket calculator.
</dl>

<p align=center><small>[
<a href="index.html">Index</a>
] - [
Previous : <a href="Requirements.html">Requirements</a>
] - [
Next : <a href="Project.html">Building a Project</a>
]</small></p>
