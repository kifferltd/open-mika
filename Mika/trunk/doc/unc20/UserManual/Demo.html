<title>/k/ Embedded Java Solutions - Mika v1.2 User Manual - Running Demos</title>
<!-- Revision History                                                      -->
<!-- 20040416 New for Mika 1.1         Chris Gray                          -->
<!-- 20040428 Updated after review     Chris Gray                          -->

<body bgcolor=white>

<h2>Running the Demo Projects</h2>

<p>Two demonstration projects are included with the Development Kit:
project <tt>io-demo</tt> demonstrates interfacing with the special
hardware of the UNC20 (using a web interface), while project <tt>filter-demo</tt>
demonstrates text processing and dynamic loading of components.
For both projects you will need to have your UNC20 connected to a LAN,
and have the Mika directory either NFS-mounted or copied onto a JFFS2
partition (see preceding chapter).

<h3>The I/O Demo</h3>

<p>This (rather crude) web demo shows how a simple web page can be displayed
using only Java code, and demonstrates the Java bindings which
<font color="#cc0000">Mi|k|a</font> provides for the UNC20 hardware.
It requires about 4 MB of heap memory; this is typical for 
non-trivial Java applications.

<p>Telnet to the UNC20, or connect a terminal program to the console, 
and run the command
<pre>/Mika/mika -Xmx=4M -jar {}/apps/io-demo.jar</pre>
(to run <font color="#cc0000">Mi|k|a</font>
from a JFFS2 partition: use e.g. <tt>/nfs/Mika/mika</tt> to run from NFS.)

<p>You should see the output
<pre>Maximum heap size = 4M</pre>
followed after about 30 seconds by
<pre>
Application Class Loader: parent is System Class Loader
de.fsforth.unc20.demo.io.GPIOView : Hello World
Use buttons to toggle lamps, hold both buttons down to quit
</pre>

<p>If you have an LCD display attached, you should see some scrolling text
on the display. Otherwise will also see the following message on the console:
<pre>
Unable to open LCD device, aborting LCDDemo.
</pre>

<p>This is harmless: the GPIO demo is still running.

<p>Now press one of the two buttons PORTC0, PORTC4. The corresponding lamp
(PORTA4, PORTA6) should light up. Pressing each button toggles the corresponding
lamp. Pressing both buttons simultaneously will terminate the demo.

<p>Now attach a web browser to port 8080 of the UNC20, e.g.
<tt>http://192.168.42.7:8080</tt>.
You should see a three-framed display in which the lower-left frame
contains two buttons labelled PORTC0 and PORTC4, while the lower-right
frame contains two indicators PORTA4 and PORTA6. The indicators display
the status of the UNC20 lamps: green if the lamp is lit, red if it is unlit.
The buttons perform the same function as the corresponding buttons on the
UNC20.

<p align=center><img src="./io-demo.jpeg"></p>

<h3>The Filter Demo</h3>

<p>For this demo you will need the excellent little utility <tt>netcat</tt>,
available from all good FTP sites. Start two copies, one listening to port
12345 on your development machine and one listening to port 12346: e.g.
<pre>
xterm -T 12345 -e netcat -l -p 12345 & xterm -T 12346 -e netcat -l -p 12346 &
</pre>

<p>On the UNC20, run the command
<pre>
/Mika/mika -Xmx=4M \
  -Dde.fsforth.unc20.demo.filter.source.host=192.168.42.1 \
  -Dde.fsforth.unc20.demo.filter.sink.host=192.168.42.1 \
  -jar {}/apps/filter-demo.jar
</pre>

<p>(Substitute the IP address of your development machine for 192.168.42.1).
<p>You should see the output
<pre>Maximum heap size = 4M</pre>
followed after about 30 seconds by
<pre>
Application Class Loader: parent is System Class Loader
Connecting to source 192.168.42.1/192.168.42.1:12345 ...
Connected.
Connecting to sink 192.168.42.1/192.168.42.1:12346 ...
Connected.
FSForth demo: ready to receive commands
> 
</pre>

<p>The demo has now connected to the two netcat "servers".
At this point everything you type in the netcat "12345" window 
should be echoed in the "12346" window.

<p>Now go back to the window in which you launched the demo and type the
command
<pre>
insert DemoFilter1
</pre>

<p>Now everything sent to the UNC20 on port 12345 is echoed on 12346
IN UPPER CASE.

<p>You can also try DemoFilter2 (changes all p's to q's and all i's to u's),
and DemoFilter3 (reverses each line of text).

<p>This demonstrates not only the text processing abilities of Java (look in
directory <tt>apps/filter-demo/javasrc/de/fsforth/unc20/demo/filter</tt> to
see how simple the filter classes are), but also the way Java applications
can be written to make use of components (services) which will be downloaded
later - all that needs to be known in advance is the interface which the
downloaded component will implement (in this case <tt>DemoFilterInterface</tt>).
This simple yet powerful idea underpins technologies such as JINI and OSGi.

<p align=center><small>[
<a href="index.html">Index</a>
] - [
Previous : <a href="Project.html">Building a Project</a>
] - [
Next : <a href="Running.html">Executing Java code on the UNC20</a>
]</small></p>

